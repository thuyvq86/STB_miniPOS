<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>PCL Library: Performing Transactions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ingenico.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">PCL Library
   &#160;<span id="projectnumber">version 5.11</span>
   </div>
   <div id="projectbrief">provides all the needed APIs to control your Ingenico device (iSMP, iSMP Companion and iCMP)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___i_c_administration_transaction.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Performing Transactions<div class="ingroups"><a class="el" href="group___i_c_administration_group.html">Administration</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>All methods and structures necessary to perform a transaction on the Companion.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i_c_transaction_request.html">ICTransactionRequest</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transaction request structure in iSMP standalone payment mode.  <a href="struct_i_c_transaction_request.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i_c_transaction_reply.html">ICTransactionReply</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The output data structure of <a class="el" href="group___i_c_administration_transaction.html#doTransaction">doTransaction</a>.  <a href="struct_i_c_transaction_reply.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8ed3574aac826dc206df924cbb6de212"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="group___i_c_administration_transaction.html#ga8ed3574aac826dc206df924cbb6de212">doTransaction:</a></td></tr>
<tr class="memdesc:ga8ed3574aac826dc206df924cbb6de212"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a transaction in standalone payment mode.  <a href="#ga8ed3574aac826dc206df924cbb6de212">More...</a><br/></td></tr>
<tr class="separator:ga8ed3574aac826dc206df924cbb6de212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef94221207a192b2253518473c107dea"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="group___i_c_administration_transaction.html#gaef94221207a192b2253518473c107dea">doTransaction:withData:andApplicationNumber:</a></td></tr>
<tr class="memdesc:gaef94221207a192b2253518473c107dea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a transaction in standalone payment mode with additional parameters.  <a href="#gaef94221207a192b2253518473c107dea">More...</a><br/></td></tr>
<tr class="separator:gaef94221207a192b2253518473c107dea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf647fa2114a4772c4645d5a78782a7cb"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="group___i_c_administration_transaction.html#gaf647fa2114a4772c4645d5a78782a7cb">setDoTransactionTimeout:</a></td></tr>
<tr class="memdesc:gaf647fa2114a4772c4645d5a78782a7cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the transaction timeout.  <a href="#gaf647fa2114a4772c4645d5a78782a7cb">More...</a><br/></td></tr>
<tr class="separator:gaf647fa2114a4772c4645d5a78782a7cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadc9a4d286bcea7e33030bda82c379ba6"><td class="memItemLeft" align="right" valign="top">(NSUInteger)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="group___i_c_administration_transaction.html#gadc9a4d286bcea7e33030bda82c379ba6">getDoTransactionTimeout</a></td></tr>
<tr class="memdesc:gadc9a4d286bcea7e33030bda82c379ba6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the doTransaction timeout.  <a href="#gadc9a4d286bcea7e33030bda82c379ba6">More...</a><br/></td></tr>
<tr class="separator:gadc9a4d286bcea7e33030bda82c379ba6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae171fe4ba28813880496e7a21a014619"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="group___i_c_administration_transaction.html#gae171fe4ba28813880496e7a21a014619">submitSignatureWithImage:</a></td></tr>
<tr class="memdesc:gae171fe4ba28813880496e7a21a014619"><td class="mdescLeft">&#160;</td><td class="mdescRight">Submit the signature on the iDevice screen to the Companion.  <a href="#gae171fe4ba28813880496e7a21a014619">More...</a><br/></td></tr>
<tr class="separator:gae171fe4ba28813880496e7a21a014619"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd672041ab0472d6670a48770c911332"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="group___i_c_administration_transaction.html#gacd672041ab0472d6670a48770c911332">sendMessage:</a></td></tr>
<tr class="memdesc:gacd672041ab0472d6670a48770c911332"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to the Companion.  <a href="#gacd672041ab0472d6670a48770c911332">More...</a><br/></td></tr>
<tr class="separator:gacd672041ab0472d6670a48770c911332"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafa7da6d050ebe8e9c5ca8b6ef953c102"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="group___i_c_administration_transaction.html#gafa7da6d050ebe8e9c5ca8b6ef953c102">transactionDidEndWithTimeoutFlag:result:andData:</a></td></tr>
<tr class="memdesc:gafa7da6d050ebe8e9c5ca8b6ef953c102"><td class="mdescLeft">&#160;</td><td class="mdescRight">This event is triggered when the Companion is done processing a transaction called through <a class="el" href="group___i_c_administration_transaction.html#doTransactionExtended">doTransactionExtended</a>.  <a href="#gafa7da6d050ebe8e9c5ca8b6ef953c102">More...</a><br/></td></tr>
<tr class="separator:gafa7da6d050ebe8e9c5ca8b6ef953c102"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05746e81b5509b1d6ebe1b77440ca772"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="group___i_c_administration_transaction.html#ga05746e81b5509b1d6ebe1b77440ca772">shouldDoSignatureCapture:</a></td></tr>
<tr class="memdesc:ga05746e81b5509b1d6ebe1b77440ca772"><td class="mdescLeft">&#160;</td><td class="mdescRight">This event is triggered when the iOS receives a Do Signature Capture request.  <a href="#ga05746e81b5509b1d6ebe1b77440ca772">More...</a><br/></td></tr>
<tr class="separator:ga05746e81b5509b1d6ebe1b77440ca772"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f907dcff5daccb5ea0d2524a0151cdc"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="group___i_c_administration_transaction.html#ga9f907dcff5daccb5ea0d2524a0151cdc">signatureTimeoutExceeded</a></td></tr>
<tr class="memdesc:ga9f907dcff5daccb5ea0d2524a0151cdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">This event is triggered if the signature is not captured within the time limits specified within the <a class="el" href="group___i_c_administration_transaction.html#shouldDoSignatureCapture">shouldDoSignatureCapture</a> event's parameters.  <a href="#ga9f907dcff5daccb5ea0d2524a0151cdc">More...</a><br/></td></tr>
<tr class="separator:ga9f907dcff5daccb5ea0d2524a0151cdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab5b965bcd0ee7695e29a52b4a0b89fc9"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="group___i_c_administration_transaction.html#gab5b965bcd0ee7695e29a52b4a0b89fc9">messageReceivedWithData:</a></td></tr>
<tr class="memdesc:gab5b965bcd0ee7695e29a52b4a0b89fc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This event is triggered when the iDevice receives a message from the Companion.  <a href="#gab5b965bcd0ee7695e29a52b4a0b89fc9">More...</a><br/></td></tr>
<tr class="separator:gab5b965bcd0ee7695e29a52b4a0b89fc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>All methods and structures necessary to perform a transaction on the Companion. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga8ed3574aac826dc206df924cbb6de212"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) doTransaction: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="struct_i_c_transaction_request.html">ICTransactionRequest</a>)&#160;</td>
          <td class="paramname"><em>request</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a transaction in standalone payment mode. </p>
<p><a class="anchor" id="doTransaction"></a></p>
<p>This method is called to start a transaction in standalone payment mode. In this mode, the terminal communicates directly with the bank server without having any intermediate application server. The iDevice application should act as a gateway by initializing an <a class="el" href="interface_i_c_network.html" title="Companion Network Management. ">ICNetwork</a> object before calling <a class="el" href="group___i_c_administration_transaction.html#doTransaction">doTransaction</a>.<br/>
 <a class="el" href="group___i_c_administration_transaction.html#doTransaction">doTransaction</a> is an asynchronous method that returns immediately. The application should conform to <a class="el" href="protocol_i_c_administration_stand_alone_delegate-p.html#ICAdministrationStandAloneDelegate">ICAdministrationStandAloneDelegate</a> protocol and implement <a class="el" href="group___i_c_administration_transaction.html#transactionDidEnd">transactionDidEnd</a> to be notified when the transaction is finished. The maximum allowed time for the transaction to be performed is 60 seconds, after which the transaction is deemed to have failed.<br/>
 Since <a class="el" href="group___i_c_administration_transaction.html#doTransaction">doTransaction</a> is asynchronous, it is possible to send other <a class="el" href="interface_i_c_administration.html">ICAdministration</a> requests to the iDevice before the transaction is over. This makes it possible for example to exchange some messages with an Companion application or to handle a signature capture request.<br/>
 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>An <a class="el" href="struct_i_c_transaction_request.html#ICTransactionRequest">ICTransactionRequest</a> structure that should be filled with the parameters required to perform the transaction. </td></tr>
  </table>
  </dd>
</dl>

<p>Extends class <a class="el" href="group___i_c_administration_transaction.html#ga8ed3574aac826dc206df924cbb6de212">ICAdministration</a>.</p>

</div>
</div>
<a class="anchor" id="gaef94221207a192b2253518473c107dea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) doTransaction: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="struct_i_c_transaction_request.html">ICTransactionRequest</a>)&#160;</td>
          <td class="paramname"><em>request</em></td>
        </tr>
        <tr>
          <td class="paramkey">withData:</td>
          <td></td>
          <td class="paramtype">(NSData *)&#160;</td>
          <td class="paramname"><em>extendedData</em></td>
        </tr>
        <tr>
          <td class="paramkey">andApplicationNumber:</td>
          <td></td>
          <td class="paramtype">(NSUInteger)&#160;</td>
          <td class="paramname"><em>appNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a transaction in standalone payment mode with additional parameters. </p>
<p><a class="anchor" id="doTransactionExtended"></a></p>
<p>This method acts exactly as <a class="el" href="group___i_c_administration_transaction.html#doTransaction">doTransaction</a>. The only difference is that it comes with additional parameters to customize the transaction by passing extra data structures and specifying the terminal application that should be invoked. This function is also asynchronous and returns immediately. The result is provided to the iOS application through the callback <a class="el" href="group___i_c_administration_transaction.html#transactionDidEnd">transactionDidEnd</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>An <a class="el" href="struct_i_c_transaction_request.html#ICTransactionRequest">ICTransactionRequest</a> structure that should be filled with the parameters required to perform the transaction. </td></tr>
    <tr><td class="paramname">extendedData</td><td>A NSData object that contains any additional transaction data to be passed to the terminal. The maximum data length that can be passed through this parameter is 16 KB. </td></tr>
    <tr><td class="paramname">appNum</td><td>The number of the terminal application that should be invoked to handle the transaction. If this parameter is set to 0, the payment application will be implicitely selected. </td></tr>
  </table>
  </dd>
</dl>

<p>Extends class <a class="el" href="group___i_c_administration_transaction.html#gaef94221207a192b2253518473c107dea">ICAdministration</a>.</p>

</div>
</div>
<a class="anchor" id="gadc9a4d286bcea7e33030bda82c379ba6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSUInteger) getDoTransactionTimeout </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the doTransaction timeout. </p>
<dl class="section return"><dt>Returns</dt><dd>The doTransaction timeout value </dd></dl>

<p>Extends class <a class="el" href="group___i_c_administration_transaction.html#gadc9a4d286bcea7e33030bda82c379ba6">ICAdministration</a>.</p>

</div>
</div>
<a class="anchor" id="gab5b965bcd0ee7695e29a52b4a0b89fc9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) messageReceivedWithData: </td>
          <td></td>
          <td class="paramtype">(NSData *)&#160;</td>
          <td class="paramname"><em>data</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This event is triggered when the iDevice receives a message from the Companion. </p>
<p><a class="anchor" id="messageReceivedWithData"></a></p>
<p>The iDevice and the Companion applications should agree beforehand on the messages to be exchanged and on how they will be used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>An NSData containing the message </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gacd672041ab0472d6670a48770c911332"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) sendMessage: </td>
          <td></td>
          <td class="paramtype">(NSData *)&#160;</td>
          <td class="paramname"><em>data</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message to the Companion. </p>
<p><a class="anchor" id="sendMessage"></a></p>
<p>The UnderCover messaging makes it possible to wrap any third-party protocol with the protocol used on the administration channel. Before using the UnderCover messaging, the iOS application and the Companion's application must agree on the protocol or the messages that would be exchanged.<br/>
 Refer to <a class="el" href="group___i_c_administration_transaction.html#messageReceivedWithData">messageReceivedWithData</a> on how to receive messages from the Companion. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>An NSData object containg the message to be sent. The maximum allowed data length is 1KB. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>YES if the message was received </dd></dl>

<p>Extends class <a class="el" href="group___i_c_administration_transaction.html#gacd672041ab0472d6670a48770c911332">ICAdministration</a>.</p>

</div>
</div>
<a class="anchor" id="gaf647fa2114a4772c4645d5a78782a7cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) setDoTransactionTimeout: </td>
          <td></td>
          <td class="paramtype">(NSUInteger)&#160;</td>
          <td class="paramname"><em>timeout</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the transaction timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>The new timeout value in milliseconds </td></tr>
  </table>
  </dd>
</dl>

<p>Extends class <a class="el" href="group___i_c_administration_transaction.html#gaf647fa2114a4772c4645d5a78782a7cb">ICAdministration</a>.</p>

</div>
</div>
<a class="anchor" id="ga05746e81b5509b1d6ebe1b77440ca772"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) shouldDoSignatureCapture: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="struct_i_c_signature_data.html">ICSignatureData</a>)&#160;</td>
          <td class="paramname"><em>signatureData</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This event is triggered when the iOS receives a Do Signature Capture request. </p>
<p><a class="anchor" id="shouldDoSignatureCapture"></a></p>
<p>Upon this event, the application should create a graphics context according to the dimension specified within the <a class="el" href="struct_i_c_signature_data.html#ICSignatureData">ICSignatureData</a> structure. The signature is then drawn on this context and should be submitted before the signature capture timeout is expired.<br/>
 A helper class <b>ICSignatureView</b> is provided as a sample. This class derives from UIView and demonstrates how to use the UIView's cocoa touch events to draw a signature. This class may be used directly or replaced in case it does not fulfill the application developer's needs in terms of GUI design. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signatureData</td><td>A C-structure containing the parameters of the signature capture </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga9f907dcff5daccb5ea0d2524a0151cdc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) signatureTimeoutExceeded </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This event is triggered if the signature is not captured within the time limits specified within the <a class="el" href="group___i_c_administration_transaction.html#shouldDoSignatureCapture">shouldDoSignatureCapture</a> event's parameters. </p>
<p><a class="anchor" id="signatureTimeoutExceeded"></a></p>
<p>When this method is called, the application should abort performing the signature capture. Calling <a class="el" href="group___i_c_administration_transaction.html#submitSignatureWithImage">submitSignatureWithImage</a> to submit the signature will then have no effect and will be ignored by the PCL library. </p>

</div>
</div>
<a class="anchor" id="gae171fe4ba28813880496e7a21a014619"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) submitSignatureWithImage: </td>
          <td></td>
          <td class="paramtype">(UIImage *)&#160;</td>
          <td class="paramname"><em>image</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Submit the signature on the iDevice screen to the Companion. </p>
<p><a class="anchor" id="submitSignatureWithImage"></a></p>
<p>This method should be called within the <a class="el" href="group___i_c_administration_transaction.html#shouldDoSignatureCapture">shouldDoSignatureCapture</a> event before the signature timeout would expire, otherwise it will be ignored </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>A UIImage object containing the signature to be submitted. The image must be in black and white, and have any iOS supported bitmap configuration. More on supported bitmap configurations <a href="http://developer.apple.com/library/mac/#qa/qa2001/qa1037.html">here</a>.<br/>
 </p>
<dl class="section return"><dt>Returns</dt><dd>A boolean value equal to YES if the signature was successfully submitted to the Companion </dd></dl>

<p>Extends class <a class="el" href="group___i_c_administration_transaction.html#gae171fe4ba28813880496e7a21a014619">ICAdministration</a>.</p>

</div>
</div>
<a class="anchor" id="gafa7da6d050ebe8e9c5ca8b6ef953c102"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) transactionDidEndWithTimeoutFlag: </td>
          <td></td>
          <td class="paramtype">(BOOL)&#160;</td>
          <td class="paramname"><em>replyReceived</em></td>
        </tr>
        <tr>
          <td class="paramkey">result:</td>
          <td></td>
          <td class="paramtype">(<a class="el" href="struct_i_c_transaction_reply.html">ICTransactionReply</a>)&#160;</td>
          <td class="paramname"><em>transactionReply</em></td>
        </tr>
        <tr>
          <td class="paramkey">andData:</td>
          <td></td>
          <td class="paramtype">(NSData *)&#160;</td>
          <td class="paramname"><em>extendedData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This event is triggered when the Companion is done processing a transaction called through <a class="el" href="group___i_c_administration_transaction.html#doTransactionExtended">doTransactionExtended</a>. </p>
<p><a class="anchor" id="transactionDidEnd"></a></p>
<p>The application must conform to <a class="el" href="protocol_i_c_administration_stand_alone_delegate-p.html#ICAdministrationStandAloneDelegate">ICAdministrationStandAloneDelegate</a> protocol and set the <a class="el" href="group___i_c_administration_initialization.html#ICAdministrationDelegate">ICAdministrationDelegate</a> property of <a class="el" href="interface_i_c_administration.html">ICAdministration</a> and implement this method in order to get the outcome of <a class="el" href="group___i_c_administration_transaction.html#doTransaction">doTransaction</a> or <a class="el" href="group___i_c_administration_transaction.html#doTransactionExtended">doTransactionExtended</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replyReceived</td><td>YES if the Companion processed the transaction in time, NO if the timeout of 60 seconds is reached. </td></tr>
    <tr><td class="paramname">transactionReply</td><td>An <a class="el" href="struct_i_c_transaction_reply.html#ICTransactionReply">ICTransactionReply</a> structure holding all the information about the transaction. </td></tr>
    <tr><td class="paramname">extendedData</td><td>A NSData object containing additional data about the outcome of the transaction. This data is only present and not nil when the transaction was performed by calling <a class="el" href="group___i_c_administration_transaction.html#doTransactionExtended">doTransactionExtended</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Nov 28 2014 17:19:56 for PCL Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
